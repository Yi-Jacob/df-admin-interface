<!-- TODO Add translations -->
<form [formGroup]="serviceForm" class="details-form">
  <mat-form-field subscriptSizing="dynamic" class="dynamic-width">
    <mat-label>{{
      'services.controls.serviceType.label' | transloco
    }}</mat-label>
    <mat-select formControlName="type">
      <mat-option *ngFor="let type of serviceTypes" [value]="type.name">
        {{ type.label }}
      </mat-option>
    </mat-select>
    <fa-icon
      class="tool-tip-trigger"
      matSuffix
      [icon]="faCircleInfo"
      [matTooltip]="'services.controls.serviceType.tooltip' | transloco" />
  </mat-form-field>
  <mat-form-field subscriptSizing="dynamic" class="dynamic-width">
    <mat-label>{{ 'services.controls.namespace.label' | transloco }}</mat-label>
    <input matInput formControlName="name" />
    <fa-icon
      class="tool-tip-trigger"
      matSuffix
      [icon]="faCircleInfo"
      [matTooltip]="'services.controls.namespace.tooltip' | transloco" />
  </mat-form-field>
  <mat-form-field subscriptSizing="dynamic" class="dynamic-width">
    <mat-label>{{ 'services.controls.label.label' | transloco }}</mat-label>
    <input matInput formControlName="label" />
    <fa-icon
      class="tool-tip-trigger"
      matSuffix
      [icon]="faCircleInfo"
      [matTooltip]="'services.controls.label.tooltip' | transloco" />
  </mat-form-field>
  <mat-form-field subscriptSizing="dynamic" class="dynamic-width">
    <mat-label>{{
      'services.controls.description.label' | transloco
    }}</mat-label>
    <input matInput formControlName="description" />
    <fa-icon
      class="tool-tip-trigger"
      matSuffix
      [icon]="faCircleInfo"
      [matTooltip]="'services.controls.description.tooltip' | transloco" />
  </mat-form-field>
  <mat-slide-toggle formControlName="active">{{
    'active' | transloco
  }}</mat-slide-toggle>
  <ng-container *ngIf="configSchema">
    <ng-container formGroupName="config">
      <mat-accordion class="full-width">
        <mat-expansion-panel>
          <mat-expansion-panel-header>{{
            'services.config' | transloco
          }}</mat-expansion-panel-header>
          <div class="details-form">
            <ng-container *ngFor="let item of configSchema">
              <df-dynamic-field
                *ngIf="
                  [
                    'integer',
                    'password',
                    'string',
                    'text',
                    'picklist',
                    'multi_picklist',
                    'boolean',
                    'file_certificate'
                  ].includes(item.type)
                "
                [schema]="item"
                [formControlName]="item.name"
                [class.dynamic-width]="item.type !== 'file_certificate'"
                [class.full-width]="
                  item.type === 'file_certificate'
                "></df-dynamic-field>
              <df-array-field
                *ngIf="item.type === 'array' || item.type === 'object'"
                [schema]="item"
                [formControlName]="item.name"
                class="full-width"></df-array-field>
            </ng-container>
          </div>
        </mat-expansion-panel>
      </mat-accordion>
    </ng-container>
  </ng-container>
</form>
